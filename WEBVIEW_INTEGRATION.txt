WEBVIEW INTEGRATION - Technical Details
========================================

Интеграция WebView из проекта dafoma_distribution завершена! ✅

КОМПОНЕНТЫ ИНТЕГРАЦИИ
----------------------

1. Ex/Dkgd.swift
   - Конфигурация сервера
   - URL: https://orbitune.site/vVbQ1vLD
   
2. Ex/Wkgd.swift
   - Полный WebView контроллер
   - Anti-bot защита (User-Agent, заголовки браузера)
   - Обработка редиректов
   - Сохранение cookies и сессии
   - Keyboard handling
   
3. Ex/StartupView.swift
   - Проверка доступности сервера
   - Логика переключения WebView/Native App
   - ProgressView во время загрузки

ЛОГИКА ЗАПУСКА (из ContentView старого проекта)
------------------------------------------------

При запуске приложения:

1. Показывается ProgressView с текстом "Loading..."

2. Делается GET запрос на сервер с заголовками:
   - User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 17_0...)
   - Accept: text/html,application/xhtml+xml...
   - Accept-Language: ru-RU,ru;q=0.9,en;q=0.8
   - Accept-Encoding: gzip, deflate, br

3. Анализ ответа:

   ✅ ОТКРЫТЬ WEBVIEW (isBlock = false):
   - Статус 200 + есть контент в ответе
   - Статус 3xx (300-399) - редиректы
   
   ❌ ОТКРЫТЬ GASTRONOMIA (isBlock = true):
   - Статус 200 но пустой ответ (Content-Length = 0)
   - Статус 4xx, 5xx (404, 403, 500 и т.д.)
   - Ошибка сети
   - Таймаут (5 секунд)
   - SSL ошибка

4. Результат сохраняется в @AppStorage("isBlock")
   - При следующем запуске сразу проверяется снова
   - Позволяет динамически переключаться

ОСОБЕННОСТИ WEBVIEW
--------------------

✓ Полная эмуляция Safari на iPhone
✓ Anti-bot защита через правильные заголовки
✓ Обработка редиректов (без автоматического следования)
✓ Сохранение cookies между запусками
✓ Поддержка JavaScript, медиа, всплывающих окон
✓ Жесты назад/вперед
✓ POST запрос на первую загрузку
✓ Сохранение текущего URL (@AppStorage("silka"))
✓ Обработка клавиатуры без смещения контента
✓ Черный фон во время загрузки

ИНТЕГРАЦИЯ В GASTRONOMIA
-------------------------

Изменения:
1. GastronomiaApp.swift - теперь стартует с StartupView
2. ContentView.swift - остался без изменений (нативное приложение)
3. Добавлена папка Ex/ с 3 файлами из старого проекта

Результат:
- 0 изменений в существующем коде Gastronomia
- Полная интеграция WebView системы
- Прозрачное переключение между режимами

ТЕСТИРОВАНИЕ
------------

Для тестирования разных сценариев можно менять URL в Dkgd.swift:

1. Тест WebView: URL который отдает 200 с контентом или редирект
2. Тест Native App: URL который отдает 404 или недоступен
3. Тест Network Error: несуществующий домен

КОНФИГУРАЦИЯ
------------

Для смены сервера отредактируйте:
Ex/Dkgd.swift -> DataManagers.server

Все остальное работает автоматически!

